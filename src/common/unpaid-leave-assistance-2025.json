{
  "contentType": "application/vnd.gorules.decision",
  "nodes": [
    {
      "id": "input-node-001",
      "name": "request",
      "type": "inputNode",
      "content": {
        "schema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"title\": \"Unpaid Leave Assistance Evaluation\",\n  \"description\": \"Schema to evaluate different cases of unpaid leave assistance\",\n  \"properties\": {\n    \"input\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"relationship\": {\n          \"type\": \"string\",\n          \"description\": \"Family relationship with the person who needs care\"\n        },\n        \"situation\": {\n          \"type\": \"string\",\n          \"enum\": [\"birth\", \"delivery\", \"adoption\", \"foster_care\", \"multiple_birth\", \"multiple_delivery\", \"multiple_adoption\", \"multiple_foster_care\", \"illness\", \"accident\"],\n          \"description\": \"Situation that motivates the need for care\"\n        },\n        \"is_single_parent\": {\n          \"type\": \"boolean\",\n          \"description\": \"Is it a single-parent family or in single-parent situation?\"\n        },\n        \"total_children_after\": {\n          \"type\": \"number\",\n          \"description\": \"Number of children including newborn if applicable\"\n        }\n      },\n      \"required\": [\"relationship\", \"situation\", \"is_single_parent\"],\n      \"additionalProperties\": false\n    }\n  },\n  \"required\": [\"input\"],\n  \"additionalProperties\": false\n}"
      },
      "position": {
        "x": -40,
        "y": 295
      }
    },
    {
      "id": "decision-table-001",
      "name": "evaluate_unpaid_leave",
      "type": "decisionTableNode",
      "content": {
        "rules": [
          {
            "_id": "regla-005",
            "output-case": "\"E\"",
            "_description": "Case E: Single-parent family with any child",
            "input-relationship": "true",
            "output-description": "\"Single-parent family with newborn\"",
            "output-tiene-derecho": "true",
            "output-importe-mensual": "500",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "\"The single-parent status must be documented\"",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "true",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "\"delivery\",\"birth\"",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "regla-002",
            "output-case": "\"B\"",
            "_description": "Case B: Third child or more with newborn",
            "input-relationship": "true",
            "output-description": "\"Third child or more with newborn\"",
            "output-tiene-derecho": "true",
            "output-importe-mensual": "500",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "\"The number of children must be 3 or more, the ages of at least 2 of the minors must be less than 6, if there is disability greater than 33% then the limit is 9 years\"",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "\"delivery\",\"birth\"",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ">=3"
          },
          {
            "_id": "9ec43eb2-484f-4fcf-9dd7-6510da30850c",
            "output-case": "\"B\"",
            "_description": "The number of children must be 3 or more, must consult with administration",
            "input-relationship": "true",
            "output-description": "\"The number of children must be 3 or more, must consult with administration\"",
            "output-tiene-derecho": "false",
            "output-importe-mensual": "0",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "\"delivery\",\"birth\"",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "regla-001",
            "output-case": "\"A\"",
            "_description": "Case A: First-degree family care sick/injured",
            "input-relationship": "true",
            "output-description": "\"First-degree family care sick or accident victim\"",
            "output-tiene-derecho": "true",
            "output-importe-mensual": "725",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "\"The person must have been hospitalized and the care of the person must be continued\"",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "\"illness\",\"accident\"",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "regla-003",
            "output-case": "\"C\"",
            "_description": "Case C: Adoption or foster care",
            "input-relationship": "true",
            "output-description": "\"Adoption or foster care\"",
            "output-tiene-derecho": "true",
            "output-importe-mensual": "500",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "\"In the foster care case the duration must be longer than one year\"",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "\"adoption\",\"foster_care\"",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "regla-004",
            "output-case": "\"D\"",
            "_description": "Case D: Delivery, adoption or foster care multiple",
            "input-relationship": "true",
            "output-description": "\"Delivery, adoption or foster care multiple\"",
            "output-tiene-derecho": "true",
            "output-importe-mensual": "500",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "\"multiple_birth\",\"multiple_delivery\",\"multiple_adoption\",\"multiple_foster_care\"",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "515afd1f-43cc-44ed-971c-fefb273840b2",
            "output-case": "\"NONE\"",
            "_description": "No case applies",
            "input-relationship": "true",
            "output-description": "\"No case applies\"",
            "output-tiene-derecho": "false",
            "output-importe-mensual": "0",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "058dd988-90dd-46da-8478-ee458aacde6f",
            "output-case": "\"NONE\"",
            "_description": "Only father, mother, son, daughter, spouse or partner are accepted",
            "input-relationship": "false",
            "output-description": "\"Not applicable by relationship (first degree)\"",
            "output-tiene-derecho": "false",
            "output-importe-mensual": "0",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          },
          {
            "_id": "f32bfb0f-801d-4d6c-b5bd-13a1edd0eaca",
            "output-case": "\"NONE\"",
            "_description": "",
            "input-relationship": "",
            "output-description": "\"UNKNOWN_ERROR\"",
            "output-tiene-derecho": "false",
            "output-importe-mensual": "0",
            "06347639-63c0-41bc-b2a0-09cea0cb669c": "",
            "4552d3df-4d61-49e3-b6a7-26da04910cda": "",
            "89ca6fb3-c65b-4943-aa7e-c6c88a787731": "",
            "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b": ""
          }
        ],
        "inputs": [
          {
            "id": "input-relationship",
            "name": "Family relationship",
            "field": "valid_relationship"
          },
          {
            "id": "89ca6fb3-c65b-4943-aa7e-c6c88a787731",
            "name": "Situation",
            "field": "input.situation"
          },
          {
            "id": "4552d3df-4d61-49e3-b6a7-26da04910cda",
            "name": "Single-parent family",
            "field": "input.is_single_parent"
          },
          {
            "id": "f3560ff1-a5b9-4eb2-8c45-b82f6e65646b",
            "name": "Number of children",
            "field": "input.total_children_after"
          }
        ],
        "outputs": [
          {
            "id": "output-tiene-derecho",
            "name": "Potentially eligible",
            "field": "output.potentially_eligible"
          },
          {
            "id": "output-importe-mensual",
            "name": "Monthly benefit",
            "field": "output.monthly_benefit"
          },
          {
            "id": "output-case",
            "name": "Case",
            "field": "output.case"
          },
          {
            "id": "output-description",
            "name": "Description",
            "field": "output.description"
          },
          {
            "id": "06347639-63c0-41bc-b2a0-09cea0cb669c",
            "name": "Additional Requirements",
            "field": "output.additional_requirements"
          }
        ],
        "hitPolicy": "first",
        "inputField": null,
        "outputPath": null,
        "passThrough": false,
        "executionMode": "single"
      },
      "position": {
        "x": 525,
        "y": 295
      }
    },
    {
      "id": "c4fbb492-b7d2-4123-b36b-2f6804d53700",
      "name": "evaluate_relationship",
      "type": "decisionTableNode",
      "content": {
        "rules": [
          {
            "_id": "e8c2d9f9-1cef-479f-b985-f8cf7de9f083",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"mother\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "488479c2-dbeb-4956-847b-82740ad06ffe",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"father\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "5eeb88ed-710e-442e-b8bf-241d5cb6aa4f",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"parent\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "c2c2bfdb-fa23-4551-ae1e-0f1f0678cbec",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"son\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "31b098b3-3d70-401b-8894-12054ddcb176",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"daughter\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "eda872ab-72d8-4b8f-9b0d-06f6eba7bf78",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"spouse\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "f0d3c80c-54f0-4011-bae5-9a9e64ec7633",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"partner\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "fe203f45-8617-4728-b36b-d3701a589100",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"wife\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "6b9db3aa-f5fd-460a-8962-83a49d12ecd7",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"husband\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "c4f54f22-c0b1-4624-bbba-7fd69e88b39f",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "\"foster_parent\"",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "true"
          },
          {
            "_id": "5e1a19e6-2d92-46b5-b2ae-cc228ef13b8a",
            "_description": "",
            "7284f076-dcb8-4247-8ee5-f4c0838d2ba5": "",
            "d62ef8e3-4f8e-423b-b9f5-fbd849686799": "false"
          }
        ],
        "inputs": [
          {
            "id": "7284f076-dcb8-4247-8ee5-f4c0838d2ba5",
            "name": "Input",
            "field": "input.relationship"
          }
        ],
        "outputs": [
          {
            "id": "d62ef8e3-4f8e-423b-b9f5-fbd849686799",
            "name": "Output",
            "field": "valid_relationship"
          }
        ],
        "hitPolicy": "first",
        "inputField": null,
        "outputPath": null,
        "passThrough": true,
        "executionMode": "single"
      },
      "position": {
        "x": 250,
        "y": 295
      }
    },
    {
      "id": "7d5b2e39-d9e4-4f22-8313-1f195a02bff2",
      "name": "response",
      "type": "outputNode",
      "content": {
        "schema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"title\": \"Output Unpaid Leave Assistance\",\n  \"description\": \"Result of the evaluation of the cases of assistance\",\n  \"properties\": {\n    \"output\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"description\": {\n          \"type\": \"string\",\n          \"description\": \"Description of the applicable case\"\n        },\n        \"monthly_benefit\": {\n          \"type\": \"integer\",\n          \"description\": \"Monthly benefit amount in euros\"\n        },\n        \"additional_requirements\": {\n          \"type\": \"string\",\n          \"description\": \"Detailed description of additional requirements that must be met\"\n        },\n        \"case\": {\n          \"type\": \"string\",\n          \"description\": \"Letter of the applicable case according to regulations (A, B, C, D, E) or empty if not eligible\"\n        },\n        \"potentially_eligible\": {\n          \"type\": \"boolean\",\n          \"description\": \"Does it meet the intrinsic requirements to potentially be entitled to the benefit?\"\n        },\n        \"errores\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          },\n          \"description\": \"List of errors or unmet requirements\"\n        },\n        \"warnings\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          },\n          \"description\": \"List of warnings or additional relevant information\"\n        }\n      },\n      \"required\": [\"description\", \"monthly_benefit\", \"case\", \"potentially_eligible\"],\n      \"additionalProperties\": false\n    }\n  },\n  \"required\": [\"output\"],\n  \"additionalProperties\": false\n}"
      },
      "position": {
        "x": 855,
        "y": 295
      }
    }
  ],
  "edges": [
    {
      "id": "b705448a-d132-4156-a609-063663b31c98",
      "type": "edge",
      "sourceId": "input-node-001",
      "targetId": "c4fbb492-b7d2-4123-b36b-2f6804d53700"
    },
    {
      "id": "cde7b12d-1ea1-4046-816f-c320aca22f8d",
      "type": "edge",
      "sourceId": "c4fbb492-b7d2-4123-b36b-2f6804d53700",
      "targetId": "decision-table-001"
    },
    {
      "id": "f2e22ef4-70fd-4391-912c-98f8477b4e75",
      "type": "edge",
      "sourceId": "decision-table-001",
      "targetId": "7d5b2e39-d9e4-4f22-8313-1f195a02bff2"
    }
  ]
}